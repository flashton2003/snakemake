# The main entry point of your workflow.
# After configuring, running snakemake -n in a clone of this repository should successfully execute a dry-run of the workflow.


todo_list = ['18080-1-FR10242277', '18082-101-FR10242234', '18091-11-FR10242300', '18094-112-FR10242206', '18095-12-FR10242260', '18097-14-FR10242299', '18098-15-FR10242236', '18099-16-FR10242276', '18101-18-FR10242268', '18102-19-FR10242292', '18103-2-FR10242269', '18105-21-FR10242238', '18106-22-FR10242246', '18109-26-FR10242177', '18110-27-FR10242138', '18111-28-FR10242146', '18112-29-FR10242122', '18114-30-FR10242211', '18115-31-FR10242162', '18116-32-FR10242219', '18117-33-FR10242227', '18118-34-FR10242228', '18120-36-FR10242212', '18121-37-FR10242130', '18122-38-FR10242207', '18123-39-FR10242118', '18125-40-FR10242251', '18126-41-FR10242154', '18128-43-FR10242235', '18129-44-FR10242267', '18130-45-FR10242259', '18131-46-FR10242291', '18132-47-FR10242275', '18133-48-FR10242169', '18134-49-FR10242134', '18135-5-FR10242229', '18136-50-FR10242126', '18137-51-FR10242185', '18138-52-FR10242210', '18139-53-FR10242186', '18141-55-FR10242166', '18143-57-FR10242127', '18144-58-FR10242119', '18145-59-FR10242202', '18146-6-FR10242221', '18147-60-FR10242194', '18148-61-FR10242182', '18149-62-FR10242174', '18151-64-FR10242158', '18153-66-FR10242142', '18156-7-FR10242253', '18157-70-FR10242199', '18158-71-FR10242160', '18159-72-FR10242278', '18160-74-FR10242167', '18161-75-FR10242294', '18162-78-FR10242143', '18163-8-FR10242237', '18164-80-FR10242192', '18165-81-FR10242184', '18166-82-FR10242121', '18170-86-FR10242129', '18172-88-FR10242152', '18174-9-FR10242252', '18175-90-FR10242176', '18176-91-FR10242230', '18177-92-FR10242254', '18179-94-FR10242145', '18180-95-FR10242270', '18181-96-FR10242262', '18182-97-FR10242183', '18183-98-FR10242301', '18184-99-FR10242285', '18185-ERR3636135', '18186-ERR3636173', '18187-ERR3636186', '18188-ERR3636924', '18189-ERR3636931', '18190-ERR3636944', '18191-ERR3636947', '18192-ERR3636953', '18193-ERR3636957', '18194-ERR3636975', '18195-ERR3636991', '18196-ERR3637003', '18197-ERR3637014', '18198-ERR3637018', '18199-ERR3637029', '18200-ERR3637030', '18201-ERR3637044', '18202-ERR3637045', '18203-ERR3637050', '18204-ERR3637053', '18205-ERR3637056', '18206-ERR3637061', '18207-ERR3637065', '18208-ERR3637077', '18209-ERR3637090', '18210-ERR3637101', '18211-ERR3637108', '18212-ERR3637109', '18213-ERR3637116', '18214-ERR3637117', '18215-ERR3637124', '18216-ERR3637125', '18217-ERR3637128', '18218-ERR3637129', '18219-ERR3637130', '18220-ERR3637134', '18221-ERR3637144', '18222-ERR3637145', '18224-ERR3637156', '18225-ERR3637159', '18226-ERR3637162', '18227-ERR3637164', '18228-ERR3637179', '18230-ERR3637183', '18231-ERR3637194', '18232-ERR3637196', '18233-ERR3638223', '18234-ERR3638224', '18235-ERR3638225', '18236-ERR3638226', '18237-ERR3638227', '18238-ERR3638228', '18239-ERR3638229', '18240-ERR3638230', '18241-ERR3638231', '18242-ERR3638232', '18243-ERR3638234', '18244-ERR3638235', '18245-ERR3638236', '18246-ERR3638237', '18247-ERR3638238', '18248-ERR3638239', '18249-ERR3638240', '18250-ERR3638241', '18251-ERR3638242', '18252-ERR3638243', '18253-ERR3638244', '18254-ERR3638245', '18255-ERR3638246', '18256-ERR3638249', '18257-ERR3638250', '18258-ERR3638251', '18259-ERR3638252', '18260-ERR3638254', '18261-ERR3638255', '18262-ERR3638256', '18263-ERR3638257', '18264-ERR3638258', '18265-ERR3638259', '18266-ERR3638261', '18267-ERR3638262', '18268-ERR3638263', '18269-ERR3638265', '18270-ERR3638266', '18271-ERR3638267', '18272-ERR3638269', '18273-ERR3638270', '18274-ERR3638271', '18275-ERR3638272', '18276-ERR3638273', '18277-ERR3638274', '18278-ERR3638275', '18279-ERR3638277', '18280-ERR3638278', '18281-ERR3638280', '18282-ERR3638281', '18283-ERR3638282', '18284-ERR3638283', '18285-ERR3638284', '18286-ERR3638286', '18287-ERR3638287', '18288-ERR3638288', '18289-ERR3638289', '18290-ERR3638290', '18291-ERR3638291', '18292-ERR3638292', '18293-ERR3638293', '18294-ERR3638295', '18295-ERR3638297', '18296-ERR3638298', '18297-ERR3638299', '18298-ERR3638300', '18299-ERR3638301', '18300-ERR3638302', '18301-ERR3638303', '18302-ERR3638304', '18303-ERR3638305', '18304-ERR3638306', '18305-ERR3638307', '18306-ERR3638310', '18307-ERR3638311', '18308-ERR3638312', '18309-ERR3638313', '18310-ERR3638314', '18311-ERR3638315', '18312-ERR3638316', '18313-ERR3638317', '18314-ERR3638318', '18315-ERR3638319', '18316-ERR3638320', '18317-ERR3638321', '18318-ERR3638322', '18319-ERR3638323', '18320-ERR3638324', '18321-ERR3638325', '18322-ERR3638326', '18323-ERR3638327', '18324-ERR3638328', '18325-ERR3638329', '18326-ERR3638330', '18327-ERR3638331', '18328-ERR3638332', '18329-ERR3638333', '18330-ERR3638335', '18331-ERR3638336', '18332-ERR3638337', '18333-ERR3638338', '18334-ERR3638339', '18335-ERR3638340', '18336-ERR3638341', '18337-ERR3638343', '18338-ERR3638344', '18339-ERR3638345', '18340-ERR3638346', '18341-ERR3638348', '18342-ERR3638349', '18343-ERR3638350', '18344-ERR3638351', '18345-ERR3638353', '18346-ERR3638354', '18347-ERR3638355', '18348-ERR3638356', '18349-ERR3638357', '18350-ERR3638358', '18351-ERR3638359', '18352-ERR3638360', '18353-ERR3638361', '18354-ERR3638362', '18355-ERR3638363', '18356-ERR3638364', '18357-ERR3638365', '18358-ERR3638366', '18359-ERR3638367', '18360-ERR3638368', '18361-ERR3638369', '18362-ERR3638371', '18363-ERR3638372', '18364-ERR3638373', '18365-ERR3638374', '18366-ERR3638375', '18367-ERR3638377', '18368-ERR3638378', '18369-ERR3638379', '18370-ERR3638380', '18371-ERR3638381', '18372-ERR3638382', '18373-ERR3638384', '18374-ERR3638385', '18375-ERR3638387', '18376-ERR3638388', '18377-ERR3638389', '18378-ERR3638390', '18379-ERR3638391', '18380-ERR3638392', '18381-ERR3638393', '18382-ERR3638396', '18383-ERR3638397', '18384-ERR3638398', '18385-ERR3638399', '18386-ERR3638401', '18387-ERR3638404', '18388-ERR3638405', '18389-ERR3638406', '18390-ERR3638408', '18391-ERR3638409', '18392-ERR3638410', '18393-ERR3638411', '18394-ERR3638412', '18395-ERR3638416', '18396-ERR3638417', '18397-ERR3638418', '18398-ERR3638421', '18399-ERR3638422', '18400-ERR3638425', '18401-ERR3638426', '18402-ERR3638428', '18403-ERR3638429', '18404-ERR3638430', '18405-ERR3638431', '18406-ERR3638432', '18407-ERR3638433', '18408-ERR3638434', '18409-ERR3638435', '18410-ERR3638436', '18411-ERR3638437', '18412-ERR3638439', '18413-ERR3638441', '18414-ERR3638443', '18415-ERR3638444', '18416-ERR3638447', '18417-ERR3638449', '18418-ERR3638450', '18419-ERR3638451', '18420-ERR3638452', '18421-ERR3638453', '18422-ERR3638454', '18423-ERR3638455', '18424-ERR3638456', '18425-ERR3638457', '18426-ERR3638459', '18427-ERR3638460', '18428-ERR3638461', '18429-ERR3638462', '18430-ERR3638463', '18431-ERR3638464', '18432-ERR3638465', '18433-ERR3638466', '18434-ERR3638467', '18435-ERR3638468', '18436-ERR3638469', '18437-ERR3638470', '18438-ERR3638471', '18439-ERR3638473', '18440-ERR3638474', '18441-ERR3638475', '18442-ERR3638476', '18443-ERR3638477', '18444-ERR3638478', '18445-ERR3638479', '18446-ERR3638480', '18447-ERR3638481', '18448-ERR3638482', '18449-ERR3638483', '18450-ERR3638484', '18451-ERR3638485', '18452-ERR3638486', '18453-ERR3638487', '18454-ERR3638488', '18455-ERR3638489', '18456-ERR3638490', '18457-ERR3638491', '18458-ERR3638492', '18459-ERR3638493', '18460-ERR3638494', '18461-ERR3638495', '18462-ERR3638496', '18463-ERR3638497', '18464-ERR3638498', '18465-ERR3638499', '18466-ERR3638500', '18467-ERR3638501', '18468-ERR3638502', '18469-ERR3638503', '18470-ERR3638504', '18471-ERR3638505', '18472-ERR3638506', '18473-ERR3638507', '18474-ERR3638508', '18475-ERR3638509', '18476-ERR3638510', '18477-ERR3638511', '18478-ERR3638512', '18479-ERR3638513', '18480-ERR3638514', '18481-ERR3638515', '18482-ERR3638516', '18483-ERR3638517', '18484-ERR3638518', '18485-ERR3638519', '18486-ERR3638520', '18487-ERR3638521', '18488-ERR3638522', '18489-ERR3638523', '18490-ERR3638524', '18491-ERR3638525', '18493-ERR3638527', '18494-ERR3638528', '18495-ERR3638531', '18496-ERR3638533', '18497-ERR3638534', '18498-ERR3638535', '18499-ERR3638536', '18500-ERR3638537', '18501-ERR3638538', '18502-ERR3638539', '18503-ERR3638540', '18504-ERR3638541', '18505-ERR3638542', '18506-ERR3638543', '18507-ERR3638545', '18508-ERR3638546', '18509-ERR3638547', '18510-ERR3638548', '18511-ERR3638550', '18512-ERR3638551', '18513-ERR3638553', '18514-ERR3638554', '18515-ERR3638555', '18516-ERR3638556', '18517-ERR3638557', '18518-ERR3638558', '18519-ERR3638559', '18520-ERR3638560', '18521-ERR3638561', '18522-ERR3638563', '18523-ERR3638567', '18524-ERR3638568', '18525-ERR3638569', '18526-ERR3638570', '18527-ERR3638571', '18528-ERR3638572', '18529-ERR3638573', '18530-ERR3638574', '18531-ERR3638575', '18532-ERR3638576', '18533-ERR3638577', '18534-ERR3638578', '18535-ERR3638579', '18536-ERR3638580', '18537-ERR3638581', '18538-ERR3638582', '18539-ERR3638583', '18540-ERR3638584', '18541-ERR3638585', '18542-ERR3638587', '18543-ERR3638588', '18544-ERR3638658', '18545-ERR3638662', '18546-ERR3638663', '18547-ERR3638667', '18548-ERR3638669', '18549-ERR3638673', '18550-ERR3638676', '18551-ERR3638684', '18552-ERR3638687', '18553-ERR3638698', '18554-ERR3638699', '18555-ERR3638705', '18556-ERR3638714', '18557-ERR3638726', '18558-ERR3638727', '18559-ERR3638728', '18560-ERR3638734', '18561-ERR3638739', '18562-ERR3638744', '18563-ERR3638748', '18564-ERR3638749', '18565-ERR3638758', '18566-ERR3638761', '18567-ERR3638767', '18568-ERR3638803', '18569-ERR3638810', '18570-ERR3638931', '18571-ERR3638932', '18572-ERR3638933', '18573-ERR3638934', '18574-ERR3638935', '18575-ERR3638936', '18576-ERR3638937', '18577-ERR3638938', '18578-ERR3638940', '18579-ERR3638941', '18580-ERR3638942', '18581-ERR3638943', '18582-ERR3638944', '18583-ERR3638945', '18584-ERR3638948', '18585-ERR3638949', '18586-ERR3638950', '18587-ERR3638951', '18588-ERR3638952', '18589-ERR3638953', '18590-ERR3638954', '18591-ERR3638955', '18592-ERR3638956', '18593-ERR3638958', '18594-ERR3638959', '18595-ERR3638960', '18596-ERR3638961', '18597-ERR3638962', '18598-ERR3638963', '18599-ERR3638964', '18600-ERR3638965', '18601-ERR3638966', '18602-ERR3638967', '18603-ERR3638968', '18604-ERR3638969', '18605-ERR3638970', '18606-ERR3638971', '18607-ERR3638973', '18608-ERR3638974', '18609-ERR3638975', '18610-ERR3638976', '18611-ERR3638977', '18612-ERR3638978', '18613-ERR3638979', '18614-ERR3638980', '18615-ERR3638981', '18616-ERR3638982', '18617-ERR3638983', '18618-ERR3638984', '18619-ERR3638985', '18620-ERR3638986', '18621-ERR3638987', '18622-ERR3638988', '18623-ERR3638989', '18624-ERR3638990', '18625-ERR3638991', '18626-ERR3638992', '18627-ERR3638993', '18628-ERR3638994', '18629-ERR3638995', '18630-ERR3638996', '18631-ERR3638997', '18632-ERR3638998', '18633-ERR3638999', '18634-ERR3639001', '18635-ERR3639002', '18636-ERR3639004', '18637-ERR3639005', '18638-ERR3639007', '18639-ERR3639008', '18640-ERR3639009', '18641-ERR3639010', '18642-ERR3639011', '18643-ERR3639012', '18644-ERR3639013', '18645-ERR3639014', '18646-ERR3639015', '18647-ERR3639016', '18648-ERR3639017', '18649-ERR3639018', '18650-ERR3639019', '18651-ERR3639020', '18652-ERR3639021', '18653-ERR3639022', '18654-ERR3639023', '18655-ERR3639024', '18656-ERR3639025', '18657-ERR3639026', '18658-ERR3639028', '18659-ERR3639029', '18660-ERR3639030', '18661-ERR3639031', '18662-ERR3639032', '18663-ERR3639035', '18664-ERR3639036', '18665-ERR3639037', '18666-ERR3639039', '18667-ERR3639040', '18668-ERR3639042', '18669-ERR3639043', '18670-ERR3639044', '18671-ERR3639045', '18672-ERR3639046', '18673-ERR3639047', '18674-ERR3639048', '18675-ERR3639049', '18676-ERR3639050', '18677-ERR3639051', '18678-ERR3639052', '18679-ERR3639054', '18680-ERR3639055', '18681-ERR3639056', '18682-ERR3639057', '18683-ERR3639058', '18684-ERR3639059', '18685-ERR3639060', '18686-ERR3639061', '18687-ERR3639062', '18688-ERR3639063', '18689-ERR3639064', '18690-ERR3639065', '18691-ERR3639068', '18692-ERR3639069', '18693-ERR3639070', '18694-ERR3639071', '18695-ERR3639072', '18696-ERR3639073', '18698-ERR3639075', '18699-ERR3639076', '18700-ERR3639077', '18701-ERR3639078', '18702-ERR3639079', '18703-ERR3639080', '18704-ERR3639081', '18705-ERR3639082', '18706-ERR3639084', '18707-ERR3639085', '18708-ERR3639086', '18709-ERR3639087', '18710-ERR3639088', '18711-ERR3639089', '18712-ERR3639090', '18713-ERR3639091', '18714-ERR3639092', '18715-ERR3639093', '18716-ERR3639094', '18717-ERR3639095', '18718-ERR3639096', '18719-ERR3639097', '18720-ERR3639098', '18721-ERR3639099', '18722-ERR3639101', '18723-ERR3639102', '18724-ERR3639103', '18725-ERR3639105', '18726-ERR3639107', '18727-ERR3639108', '18728-ERR3639109', '18729-ERR3639111', '18730-ERR3639112', '18731-ERR3639113', '18732-ERR3639114', '18733-ERR3639115', '18734-ERR3639116', '18735-ERR3639119', '18736-ERR3639120', '18737-ERR3639122', '18738-ERR3639124', '18739-ERR3639126', '18740-ERR3639128', '18741-ERR3639129', '18742-ERR3639131', '18743-ERR3639132', '18744-ERR3639133', '18745-ERR3639134', '18746-ERR3639136', '18747-ERR3639137', '18748-ERR3639138', '18749-ERR3639139', '18750-ERR3639141', '18751-ERR3639142', '18752-ERR3639144', '18753-ERR3639145', '18754-ERR3639146', '18755-ERR3639148', '18756-ERR3639149', '18757-ERR3639150', '18758-ERR3639151', '18759-ERR3639154', '18760-ERR3639155', '18761-ERR3639156', '18762-ERR3639157', '18763-ERR3639158', '18764-ERR3639159', '18765-ERR3639160', '18766-ERR3639161', '18767-ERR3639162', '18768-ERR3639163', '18769-ERR3639164', '18770-ERR3639165', '18771-ERR3639204', '18772-ERR3639206', '18773-ERR3639207', '18774-ERR3639208', '18775-ERR3639597', '18776-ERR3639599', '18777-ERR3639610', '18778-ERR3639611', '18779-ERR3639693', '18780-SRR12152289', '18781-SRR12152290', '18783-SRR12152292', '18784-SRR12152293', '18785-SRR12152294', '18786-SRR12152295', '18787-SRR12152296', '18788-SRR12152297', '18789-SRR12152298', '18790-SRR12152299', '18791-SRR12152300', '18792-SRR12152301', '18793-SRR12152302', '18794-SRR12152303', '18795-SRR12152304', '18796-SRR12152305', '18797-SRR12152306', '18798-SRR12152307', '18799-SRR12152308', '18800-SRR12152309', '18801-SRR12152310', '18802-SRR12152311', '18803-SRR12152312', '18804-SRR12152313', '18805-SRR12152314', '18806-SRR12152315', '18807-SRR12152316', '18808-SRR12152317', '18809-SRR12152318', '18810-SRR12152319', '18811-SRR12152320', '18812-SRR12152321', '18813-SRR12152322', '18814-SRR12152323', '18815-SRR12152324', '18816-SRR12152325', '18817-SRR12152326', '18818-SRR12152327', '18819-SRR12152328', '18820-SRR12152329', '18821-SRR12152330', '18822-SRR12152331', '18824-SRR12152333', '18825-SRR12152334', '18826-SRR12152335', '18827-SRR12152336', '18828-SRR12152337', '18829-SRR12152338', '18830-SRR12152339', '18831-SRR12152340', '18832-SRR12152341', '18833-SRR12152342', '18834-SRR12152343', '18835-SRR12152344', '18836-SRR12152345', '18837-SRR12152346', '18838-SRR12152347', '18839-SRR12152348', '18840-SRR12152349', '18841-SRR12152350', '18842-SRR12152351', '18843-SRR12152352', '18844-SRR12152353', '18846-SRR12152355', '18847-SRR12152356', '18848-SRR12152357', '18849-SRR12152358', '18850-SRR12152359', '18851-SRR12152360', '18852-SRR12152361', '18853-SRR12152362', '18854-SRR12152363', '18855-SRR12152364', '18856-SRR12152365', '18857-SRR12152366', '18858-SRR12152367', '18859-SRR12152368', '18860-SRR12152369', '18862-SRR12152371', '18863-SRR12152372', '18864-SRR12152373', '18867-ERR023622', '18868-ERR023624', '18869-ERR023625', '18872-ERR023630', '18874-ERR023633', '18875-ERR023634', '18876-ERR023635', '18877-ERR023636', '18878-ERR023637', '18879-ERR023638', '18880-ERR023639', '18881-ERR023640', '18883-ERR023642', '18884-ERR023643', '18885-ERR023644', '18886-ERR023650', '18887-ERR023653', '18889-ERR023655', '18890-ERR023656', '18891-ERR023657']
root_dir = '/home/ubuntu/hao_shigella/salmonella/oucru_robot'

# Allow users to fix the underlying OS via singularity.
# singularity: "docker://continuumio/miniconda3"

rule all:
    input:
        expand('{root_dir}/{sample}/phenix_bbduk/{sample}.depth', sample = todo_list, root_dir = root_dir)
        # The first rule should define the default target files
        # Subsequent target rules can be specified below. They should start with all_*.

rule samtools_depth:
    input:
        bam = '{root_dir}/{sample}/phenix_bbduk/{sample}.bam'
    output:
        depth = '{root_dir}/{sample}/phenix_bbduk/{sample}.depth'
    run:
        shell('printf "{input.bam}\t" > {output.depth}')
        shell('samtools depth -aa {input.bam} |  awk \'{{sum+=$3}} END {{ print sum/NR}}\' >> {output.depth}')


